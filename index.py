import slack
import os
from pathlib import Path
from dotenv import load_dotenv
import schedule
import time
import requests

response = {'lat': 43.49, 'lon': -111.9762, 'timezone': 'America/Boise', 'timezone_offset': -21600, 'current': {'dt': 1633151348, 'sunrise': 1633094738, 'sunset': 1633136945, 'temp': 44.29, 'feels_like': 44.29, 'pressure': 1023, 'humidity': 57, 'dew_point': 30.27, 'uvi': 0, 'clouds': 1, 'visibility': 9656, 'wind_speed': 0, 'wind_deg': 0, 'weather': [{'id': 721, 'main': 'Haze', 'description': 'haze', 'icon': '50n'}]}, 'minutely': [{'dt': 1633151400, 'precipitation': 0}, {'dt': 1633151460, 'precipitation': 0}, {'dt': 1633151520, 'precipitation': 0}, {'dt': 1633151580, 'precipitation': 0}, {'dt': 1633151640, 'precipitation': 0}, {'dt': 
1633151700, 'precipitation': 0}, {'dt': 1633151760, 'precipitation': 0}, {'dt': 1633151820, 'precipitation': 0}, {'dt': 1633151880, 'precipitation': 0}, {'dt': 1633151940, 'precipitation': 0}, {'dt': 1633152000, 'precipitation': 0}, {'dt': 1633152060, 
'precipitation': 0}, {'dt': 1633152120, 'precipitation': 0}, {'dt': 1633152180, 'precipitation': 0}, {'dt': 1633152240, 'precipitation': 0}, {'dt': 1633152300, 'precipitation': 0}, {'dt': 1633152360, 'precipitation': 0}, {'dt': 1633152420, 'precipitation': 0}, {'dt': 1633152480, 'precipitation': 0}, {'dt': 1633152540, 'precipitation': 0}, {'dt': 1633152600, 'precipitation': 0}, {'dt': 1633152660, 'precipitation': 0}, {'dt': 1633152720, 'precipitation': 0}, {'dt': 1633152780, 'precipitation': 0}, {'dt': 1633152840, 'precipitation': 0}, {'dt': 1633152900, 'precipitation': 0}, {'dt': 
1633152960, 'precipitation': 0}, {'dt': 1633153020, 'precipitation': 0}, {'dt': 1633153080, 'precipitation': 0}, {'dt': 1633153140, 'precipitation': 0}, {'dt': 1633153200, 'precipitation': 0}, {'dt': 1633153260, 'precipitation': 0}, {'dt': 1633153320, 
'precipitation': 0}, {'dt': 1633153380, 'precipitation': 0}, {'dt': 1633153440, 'precipitation': 0}, {'dt': 1633153500, 'precipitation': 0}, {'dt': 1633153560, 'precipitation': 0}, {'dt': 1633153620, 'precipitation': 0}, {'dt': 1633153680, 'precipitation': 0}, {'dt': 1633153740, 'precipitation': 0}, {'dt': 1633153800, 'precipitation': 0}, {'dt': 1633153860, 'precipitation': 0}, {'dt': 1633153920, 'precipitation': 0}, {'dt': 1633153980, 'precipitation': 0}, {'dt': 1633154040, 'precipitation': 0}, {'dt': 1633154100, 'precipitation': 0}, {'dt': 1633154160, 'precipitation': 0}, {'dt': 
1633154220, 'precipitation': 0}, {'dt': 1633154280, 'precipitation': 0}, {'dt': 1633154340, 'precipitation': 0}, {'dt': 1633154400, 'precipitation': 0}, {'dt': 1633154460, 'precipitation': 0}, {'dt': 1633154520, 'precipitation': 0}, {'dt': 1633154580, 
'precipitation': 0}, {'dt': 1633154640, 'precipitation': 0}, {'dt': 1633154700, 'precipitation': 0}, {'dt': 1633154760, 'precipitation': 0}, {'dt': 1633154820, 'precipitation': 0}, {'dt': 1633154880, 'precipitation': 0}, {'dt': 1633154940, 'precipitation': 0}, {'dt': 1633155000, 'precipitation': 0}], 'hourly': [{'dt': 1633150800, 'temp': 44.29, 'feels_like': 41.94, 'pressure': 1023, 'humidity': 57, 'dew_point': 30.27, 'uvi': 0, 'clouds': 1, 'visibility': 10000, 'wind_speed': 4.43, 'wind_deg': 156, 'wind_gust': 4.29, 'weather': [{'id': 800, 
'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1633154400, 'temp': 45.07, 'feels_like': 42.98, 'pressure': 1023, 'humidity': 49, 'dew_point': 27.64, 'uvi': 0, 'clouds': 10, 'visibility': 10000, 'wind_speed': 4.25, 'wind_deg': 152, 'wind_gust': 4.16, 'weather': 
[{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1633158000, 'temp': 45.48, 'feels_like': 43.65, 'pressure': 1023, 'humidity': 41, 'dew_point': 24.19, 'uvi': 0, 'clouds': 1, 'visibility': 10000, 'wind_speed': 4, 'wind_deg': 143, 'wind_gust': 3.87, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 
'pop': 0}, {'dt': 1633161600, 'temp': 45.57, 'feels_like': 44.38, 'pressure': 1022, 
'humidity': 33, 'dew_point': 19.71, 'uvi': 0, 'clouds': 0, 'visibility': 10000, 'wind_speed': 3.29, 'wind_deg': 141, 'wind_gust': 3.13, 'weather': [{'id': 800, 'main': 
'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1633165200, 
'temp': 45.21, 'feels_like': 45.21, 'pressure': 1022, 'humidity': 26, 'dew_point': 14.52, 'uvi': 0, 'clouds': 2, 'visibility': 10000, 'wind_speed': 2.86, 'wind_deg': 134, 'wind_gust': 2.71, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 
1633168800, 'temp': 44.82, 'feels_like': 43.7, 'pressure': 1022, 'humidity': 20, 'dew_point': 5.31, 'uvi': 0, 'clouds': 5, 'visibility': 10000, 'wind_speed': 3.11, 'wind_deg': 139, 'wind_gust': 2.98, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1633172400, 'temp': 43.77, 'feels_like': 43.77, 'pressure': 1023, 'humidity': 20, 'dew_point': 5.5, 'uvi': 0, 'clouds': 6, 'visibility': 10000, 'wind_speed': 
2.19, 'wind_deg': 126, 'wind_gust': 1.97, 
'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1633176000, 'temp': 43.03, 'feels_like': 43.03, 'pressure': 1023, 'humidity': 21, 'dew_point': 5.43, 'uvi': 0, 'clouds': 6, 'visibility': 10000, 'wind_speed': 1.59, 'wind_deg': 115, 'wind_gust': 2.08, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 1633179600, 'temp': 42.15, 'feels_like': 42.15, 'pressure': 1024, 'humidity': 22, 'dew_point': 
5.52, 'uvi': 0, 'clouds': 7, 'visibility': 10000, 'wind_speed': 2.46, 'wind_deg': 120, 'wind_gust': 2.53, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'pop': 0}, {'dt': 
1633183200, 'temp': 43.34, 'feels_like': 43.34, 'pressure': 1024, 'humidity': 21, 'dew_point': 5.85, 'uvi': 0, 'clouds': 6, 'visibility': 10000, 'wind_speed': 2.21, 'wind_deg': 124, 'wind_gust': 2.17, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 
0}, {'dt': 1633186800, 'temp': 50.83, 'feels_like': 46.36, 'pressure': 1023, 'humidity': 16, 'dew_point': 6.28, 'uvi': 0.44, 'clouds': 4, 'visibility': 10000, 'wind_speed': 1.97, 'wind_deg': 140, 'wind_gust': 2.53, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1633190400, 'temp': 56.26, 'feels_like': 52.25, 'pressure': 1023, 'humidity': 14, 'dew_point': 6.8, 'uvi': 1.32, 'clouds': 3, 'visibility': 10000, 'wind_speed': 2.37, 'wind_deg': 265, 'wind_gust': 2.82, 'weather': [{'id': 800, 
'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1633194000, 'temp': 60.04, 'feels_like': 56.35, 'pressure': 1022, 'humidity': 13, 'dew_point': 9.32, 'uvi': 2.58, 'clouds': 2, 'visibility': 10000, 'wind_speed': 4.07, 'wind_deg': 242, 'wind_gust': 5.75, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1633197600, 'temp': 64.4, 'feels_like': 61.14, 'pressure': 1020, 'humidity': 13, 'dew_point': 12.11, 'uvi': 3.85, 'clouds': 2, 'visibility': 10000, 'wind_speed': 6.96, 'wind_deg': 240, 'wind_gust': 8.39, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1633201200, 'temp': 67.62, 'feels_like': 64.65, 'pressure': 
1019, 'humidity': 12, 'dew_point': 13.41, 
'uvi': 4.71, 'clouds': 4, 'visibility': 10000, 'wind_speed': 8.88, 'wind_deg': 248, 
'wind_gust': 10.02, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1633204800, 'temp': 69.62, 'feels_like': 66.79, 'pressure': 1018, 'humidity': 11, 'dew_point': 12.97, 'uvi': 4.68, 'clouds': 3, 
'visibility': 10000, 'wind_speed': 9.89, 'wind_deg': 246, 'wind_gust': 10.94, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1633208400, 'temp': 70.65, 'feels_like': 67.93, 'pressure': 1017, 'humidity': 11, 'dew_point': 12.47, 'uvi': 3.85, 'clouds': 4, 'visibility': 10000, 'wind_speed': 10.54, 'wind_deg': 246, 'wind_gust': 11.88, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1633212000, 'temp': 70.95, 'feels_like': 68.27, 'pressure': 1016, 'humidity': 11, 'dew_point': 
13.64, 'uvi': 2.57, 'clouds': 4, 'visibility': 10000, 'wind_speed': 10.29, 'wind_deg': 243, 'wind_gust': 11.92, 'weather': [{'id': 800, 'main': 'Clear', 'description': 
'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1633215600, 'temp': 70.72, 'feels_like': 68.11, 'pressure': 1016, 'humidity': 
13, 'dew_point': 16.59, 'uvi': 1.28, 'clouds': 5, 'visibility': 10000, 'wind_speed': 9.93, 'wind_deg': 238, 'wind_gust': 12.28, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1633219200, 'temp': 
69.01, 'feels_like': 66.27, 'pressure': 1015, 'humidity': 14, 'dew_point': 17.76, 'uvi': 0.4, 'clouds': 5, 'visibility': 10000, 'wind_speed': 9.15, 'wind_deg': 237, 'wind_gust': 12.84, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'pop': 0}, {'dt': 1633222800, 'temp': 59.97, 'feels_like': 56.57, 'pressure': 1017, 'humidity': 19, 'dew_point': 17.13, 'uvi': 0, 'clouds': 52, 'visibility': 10000, 'wind_speed': 6.49, 'wind_deg': 220, 'wind_gust': 6.53, 'weather': [{'id': 803, 'main': 'Clouds', 'description': 'broken clouds', 'icon': '04d'}], 'pop': 0}, {'dt': 1633226400, 'temp': 55.85, 'feels_like': 52.18, 'pressure': 1018, 'humidity': 22, 'dew_point': 16.66, 'uvi': 0, 'clouds': 74, 'visibility': 10000, 'wind_speed': 7.07, 'wind_deg': 185, 'wind_gust': 
6.87, 'weather': [{'id': 803, 'main': 'Clouds', 'description': 'broken clouds', 'icon': '04n'}], 'pop': 0}, {'dt': 1633230000, 'temp': 53.83, 'feels_like': 50, 'pressure': 1019, 'humidity': 23, 'dew_point': 16.16, 'uvi': 0, 'clouds': 83, 'visibility': 
10000, 'wind_speed': 7.92, 'wind_deg': 171, 'wind_gust': 7.58, 'weather': [{'id': 803, 'main': 'Clouds', 'description': 'broken clouds', 'icon': '04n'}], 'pop': 0}, {'dt': 1633233600, 'temp': 53.1, 'feels_like': 49.19, 'pressure': 1019, 'humidity': 23, 'dew_point': 15.46, 'uvi': 0, 'clouds': 87, 'visibility': 10000, 'wind_speed': 7.34, 'wind_deg': 168, 'wind_gust': 7.25, 'weather': [{'id': 804, 'main': 'Clouds', 'description': 'overcast clouds', 'icon': '04n'}], 'pop': 0}, {'dt': 1633237200, 'temp': 51.98, 'feels_like': 48, 'pressure': 1019, 'humidity': 24, 'dew_point': 15.37, 'uvi': 0, 'clouds': 89, 'visibility': 10000, 'wind_speed': 6.24, 'wind_deg': 169, 'wind_gust': 6.17, 'weather': [{'id': 804, 'main': 'Clouds', 'description': 'overcast clouds', 'icon': '04n'}], 'pop': 0}, {'dt': 1633240800, 'temp': 50.92, 'feels_like': 46.89, 'pressure': 1020, 'humidity': 25, 'dew_point': 16.09, 'uvi': 0, 'clouds': 89, 'visibility': 10000, 'wind_speed': 5.77, 'wind_deg': 165, 'wind_gust': 5.59, 'weather': [{'id': 804, 'main': 'Clouds', 'description': 'overcast clouds', 'icon': '04n'}], 
'pop': 0}, {'dt': 1633244400, 'temp': 50, 
'feels_like': 47.73, 'pressure': 1020, 'humidity': 27, 'dew_point': 17.06, 'uvi': 0, 'clouds': 11, 'visibility': 10000, 'wind_speed': 5.86, 'wind_deg': 161, 'wind_gust': 5.88, 'weather': [{'id': 801, 'main': 'Clouds', 'description': 'few clouds', 'icon': '02n'}], 'pop': 0}, {'dt': 1633248000, 
'temp': 49.14, 'feels_like': 46.74, 'pressure': 1020, 'humidity': 29, 'dew_point': 17.89, 'uvi': 0, 'clouds': 13, 'visibility': 10000, 'wind_speed': 5.82, 'wind_deg': 159, 'wind_gust': 5.77, 'weather': [{'id': 
801, 'main': 'Clouds', 'description': 'few clouds', 'icon': '02n'}], 'pop': 0}, {'dt': 1633251600, 'temp': 48.25, 'feels_like': 45.99, 'pressure': 1020, 'humidity': 30, 'dew_point': 18, 'uvi': 0, 'clouds': 40, 
'visibility': 10000, 'wind_speed': 5.3, 'wind_deg': 163, 'wind_gust': 5.46, 'weather': [{'id': 802, 'main': 'Clouds', 'description': 'scattered clouds', 'icon': '03n'}], 'pop': 0}, {'dt': 1633255200, 'temp': 46.89, 'feels_like': 45.21, 'pressure': 1020, 'humidity': 31, 'dew_point': 17.08, 'uvi': 0, 'clouds': 38, 'visibility': 10000, 'wind_speed': 4.07, 'wind_deg': 157, 'wind_gust': 4.12, 'weather': [{'id': 802, 'main': 'Clouds', 'description': 'scattered clouds', 'icon': '03n'}], 'pop': 0}, {'dt': 1633258800, 'temp': 45.77, 'feels_like': 44.8, 'pressure': 1021, 'humidity': 31, 'dew_point': 16.14, 'uvi': 0, 'clouds': 38, 'visibility': 10000, 'wind_speed': 3.09, 'wind_deg': 146, 'wind_gust': 3.06, 'weather': [{'id': 802, 'main': 'Clouds', 'description': 'scattered clouds', 'icon': '03n'}], 'pop': 0}, {'dt': 1633262400, 'temp': 45.12, 'feels_like': 44.02, 'pressure': 1021, 'humidity': 31, 'dew_point': 15.31, 'uvi': 0, 'clouds': 44, 'visibility': 10000, 'wind_speed': 3.13, 'wind_deg': 139, 'wind_gust': 2.91, 'weather': [{'id': 802, 'main': 'Clouds', 'description': 'scattered clouds', 'icon': '03n'}], 'pop': 0}, {'dt': 1633266000, 'temp': 44.83, 'feels_like': 43.41, 'pressure': 1022, 'humidity': 30, 'dew_point': 15.03, 'uvi': 0, 'clouds': 98, 'visibility': 10000, 'wind_speed': 3.42, 'wind_deg': 136, 'wind_gust': 3.31, 'weather': [{'id': 804, 'main': 'Clouds', 'description': 'overcast clouds', 'icon': '04n'}], 
'pop': 0}, {'dt': 1633269600, 'temp': 45.86, 'feels_like': 45.86, 'pressure': 1022, 
'humidity': 29, 'dew_point': 15.24, 'uvi': 0, 'clouds': 99, 'visibility': 10000, 'wind_speed': 2.89, 'wind_deg': 137, 'wind_gust': 2.84, 'weather': [{'id': 804, 'main': 'Clouds', 'description': 'overcast clouds', 'icon': '04d'}], 'pop': 0}, {'dt': 1633273200, 'temp': 52.74, 'feels_like': 48.79, 'pressure': 1021, 'humidity': 23, 'dew_point': 15.64, 'uvi': 0.45, 'clouds': 99, 'visibility': 10000, 'wind_speed': 1.01, 'wind_deg': 142, 'wind_gust': 2.37, 'weather': [{'id': 804, 'main': 'Clouds', 'description': 'overcast clouds', 'icon': '04d'}], 'pop': 0}, {'dt': 1633276800, 'temp': 58.14, 'feels_like': 54.59, 'pressure': 1021, 'humidity': 20, 'dew_point': 16.36, 'uvi': 1.39, 'clouds': 99, 'visibility': 10000, 'wind_speed': 2.3, 'wind_deg': 284, 'wind_gust': 2.98, 'weather': [{'id': 804, 'main': 'Clouds', 'description': 'overcast clouds', 'icon': '04d'}], 'pop': 0}, {'dt': 1633280400, 'temp': 62.28, 'feels_like': 59.05, 'pressure': 1020, 'humidity': 18, 'dew_point': 17.83, 'uvi': 2.73, 'clouds': 99, 'visibility': 10000, 'wind_speed': 3.49, 'wind_deg': 282, 'wind_gust': 4.94, 'weather': [{'id': 804, 'main': 'Clouds', 'description': 'overcast clouds', 'icon': '04d'}], 'pop': 0}, {'dt': 1633284000, 'temp': 
65.93, 'feels_like': 63.01, 'pressure': 1019, 'humidity': 17, 'dew_point': 19.18, 'uvi': 4.11, 'clouds': 99, 'visibility': 10000, 'wind_speed': 4.9, 'wind_deg': 253, 'wind_gust': 7.87, 'weather': [{'id': 804, 'main': 'Clouds', 'description': 'overcast clouds', 'icon': '04d'}], 'pop': 0}, {'dt': 1633287600, 'temp': 69.53, 'feels_like': 66.88, 'pressure': 1018, 'humidity': 15, 
'dew_point': 20.16, 'uvi': 4.95, 'clouds': 100, 'visibility': 10000, 'wind_speed': 7.56, 'wind_deg': 243, 'wind_gust': 11.23, 
'weather': [{'id': 804, 'main': 'Clouds', 
'description': 'overcast clouds', 'icon': 
'04d'}], 'pop': 0}, {'dt': 1633291200, 'temp': 72.39, 'feels_like': 69.94, 'pressure': 1017, 'humidity': 13, 'dew_point': 18.57, 'uvi': 4.92, 'clouds': 97, 'visibility': 10000, 'wind_speed': 9.57, 'wind_deg': 241, 'wind_gust': 12.28, 'weather': [{'id': 804, 'main': 'Clouds', 'description': 'overcast clouds', 'icon': '04d'}], 'pop': 0}, {'dt': 1633294800, 'temp': 73.27, 'feels_like': 70.86, 'pressure': 1016, 'humidity': 12, 'dew_point': 16.61, 'uvi': 4.04, 'clouds': 92, 'visibility': 10000, 'wind_speed': 10.63, 'wind_deg': 243, 'wind_gust': 
12.59, 'weather': [{'id': 804, 'main': 'Clouds', 'description': 'overcast clouds', 'icon': '04d'}], 'pop': 0}, {'dt': 1633298400, 'temp': 73.65, 'feels_like': 71.24, 'pressure': 1015, 'humidity': 11, 'dew_point': 16.39, 'uvi': 2.66, 'clouds': 91, 'visibility': 10000, 'wind_speed': 10.18, 'wind_deg': 246, 'wind_gust': 12.01, 'weather': [{'id': 804, 'main': 'Clouds', 'description': 'overcast clouds', 'icon': '04d'}], 'pop': 0}, {'dt': 1633302000, 'temp': 73.02, 'feels_like': 70.59, 'pressure': 1015, 'humidity': 12, 'dew_point': 16.99, 'uvi': 
1.32, 'clouds': 75, 'visibility': 10000, 'wind_speed': 9.33, 'wind_deg': 243, 'wind_gust': 11.3, 'weather': [{'id': 803, 'main': 'Clouds', 'description': 'broken clouds', 'icon': '04d'}], 'pop': 0}, {'dt': 1633305600, 'temp': 70.95, 'feels_like': 68.36, 'pressure': 1015, 'humidity': 13, 'dew_point': 17.1, 'uvi': 0.41, 'clouds': 66, 'visibility': 10000, 'wind_speed': 6.02, 'wind_deg': 231, 'wind_gust': 9.01, 'weather': [{'id': 803, 'main': 'Clouds', 'description': 'broken clouds', 'icon': '04d'}], 'pop': 0}, {'dt': 1633309200, 'temp': 62.15, 'feels_like': 58.82, 'pressure': 1016, 'humidity': 16, 'dew_point': 15.39, 'uvi': 0, 'clouds': 16, 'visibility': 10000, 'wind_speed': 3.94, 'wind_deg': 182, 'wind_gust': 4.25, 'weather': [{'id': 801, 'main': 'Clouds', 'description': 'few clouds', 'icon': '02d'}], 'pop': 0}, {'dt': 1633312800, 'temp': 59.36, 'feels_like': 55.8, 'pressure': 1016, 'humidity': 17, 'dew_point': 14.31, 'uvi': 0, 'clouds': 16, 'visibility': 10000, 'wind_speed': 4.72, 'wind_deg': 152, 'wind_gust': 4.63, 'weather': [{'id': 
801, 'main': 'Clouds', 'description': 'few clouds', 'icon': '02n'}], 'pop': 0}, {'dt': 1633316400, 'temp': 56.77, 'feels_like': 52.99, 'pressure': 1017, 'humidity': 18, 'dew_point': 13.77, 'uvi': 0, 'clouds': 16, 'visibility': 10000, 'wind_speed': 4.83, 'wind_deg': 144, 'wind_gust': 4.59, 'weather': [{'id': 801, 'main': 'Clouds', 'description': 'few clouds', 'icon': '02n'}], 
'pop': 0}, {'dt': 1633320000, 'temp': 55.36, 'feels_like': 51.49, 'pressure': 1018, 
'humidity': 19, 'dew_point': 13.5, 'uvi': 
0, 'clouds': 15, 'visibility': 10000, 'wind_speed': 5.46, 'wind_deg': 136, 'wind_gust': 5.08, 'weather': [{'id': 801, 'main': 
'Clouds', 'description': 'few clouds', 'icon': '02n'}], 'pop': 0}], 'daily': [{'dt': 1633114800, 'sunrise': 1633094738, 'sunset': 1633136945, 'moonrise': 1633073820, 'moonset': 1633130160, 'moon_phase': 0.83, 'temp': {'day': 64.78, 'min': 38.71, 'max': 68.54, 'night': 44.29, 'eve': 54.68, 'morn': 38.71}, 'feels_like': {'day': 61.47, 'night': 41.94, 'eve': 50.83, 'morn': 36.39}, 'pressure': 1019, 'humidity': 11, 'dew_point': 9.32, 'wind_speed': 6.06, 'wind_deg': 305, 'wind_gust': 5.28, 'weather': [{'id': 800, 'main': 'Clear', 'description': 
'clear sky', 'icon': '01d'}], 'clouds': 7, 'pop': 0, 'uvi': 4.97}, {'dt': 1633201200, 'sunrise': 1633181206, 'sunset': 1633223237, 'moonrise': 1633164240, 'moonset': 1633218480, 'moon_phase': 0.87, 'temp': {'day': 67.62, 'min': 42.15, 'max': 70.95, 'night': 51.98, 'eve': 59.97, 'morn': 42.15}, 'feels_like': {'day': 64.65, 'night': 48, 'eve': 56.57, 'morn': 42.15}, 'pressure': 1019, 'humidity': 12, 'dew_point': 13.41, 'wind_speed': 10.54, 'wind_deg': 246, 'wind_gust': 12.84, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'clouds': 4, 'pop': 0, 
'uvi': 4.71}, {'dt': 1633287600, 'sunrise': 1633267675, 'sunset': 1633309529, 'moonrise': 1633254900, 'moonset': 1633306500, 'moon_phase': 0.9, 'temp': {'day': 69.53, 'min': 44.83, 'max': 73.65, 'night': 54.09, 'eve': 62.15, 'morn': 44.83}, 'feels_like': {'day': 66.88, 'night': 50.13, 'eve': 58.82, 'morn': 43.41}, 'pressure': 1018, 'humidity': 15, 'dew_point': 20.16, 'wind_speed': 10.63, 'wind_deg': 243, 'wind_gust': 12.59, 'weather': [{'id': 804, 'main': 'Clouds', 'description': 'overcast clouds', 
'icon': '04d'}], 'clouds': 100, 'pop': 0, 
'uvi': 4.95}, {'dt': 1633374000, 'sunrise': 1633354145, 'sunset': 1633395822, 'moonrise': 1633345620, 'moonset': 1633394460, 'moon_phase': 0.94, 'temp': {'day': 71.58, 
'min': 46.56, 'max': 78.64, 'night': 59.2, 'eve': 74.97, 'morn': 46.56}, 'feels_like': {'day': 69.01, 'night': 55.9, 'eve': 72.68, 'morn': 45.34}, 'pressure': 1015, 'humidity': 12, 'dew_point': 15.53, 'wind_speed': 14.9, 'wind_deg': 205, 'wind_gust': 20.6, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'clouds': 1, 'pop': 0, 'uvi': 4.83}, {'dt': 1633460400, 'sunrise': 1633440614, 'sunset': 1633482115, 'moonrise': 1633436460, 'moonset': 1633482300, 'moon_phase': 0.97, 'temp': {'day': 72.3, 'min': 49.78, 'max': 79.29, 'night': 67.87, 'eve': 74.28, 'morn': 49.78}, 'feels_like': {'day': 69.94, 'night': 65.59, 'eve': 72.3, 'morn': 48.47}, 'pressure': 1011, 'humidity': 15, 'dew_point': 21.22, 'wind_speed': 14.54, 
'wind_deg': 175, 'wind_gust': 27.87, 'weather': [{'id': 804, 'main': 'Clouds', 'description': 'overcast clouds', 'icon': '04d'}], 'clouds': 91, 'pop': 0, 'uvi': 4.61}, 
{'dt': 1633546800, 'sunrise': 1633527084, 
'sunset': 1633568409, 'moonrise': 1633527420, 'moonset': 1633570140, 'moon_phase': 0, 'temp': {'day': 67.86, 'min': 50.25, 'max': 72.48, 'night': 56.75, 'eve': 67.86, 'morn': 50.25}, 'feels_like': {'day': 65.95, 'night': 54.95, 'eve': 65.84, 'morn': 48.45}, 'pressure': 1011, 'humidity': 34, 'dew_point': 38.46, 'wind_speed': 10.09, 'wind_deg': 160, 'wind_gust': 20.42, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10d'}], 'clouds': 38, 'pop': 0.65, 'rain': 1.15, 'uvi': 
5}, {'dt': 1633633200, 'sunrise': 1633613554, 'sunset': 1633654703, 'moonrise': 1633618440, 'moonset': 1633658160, 'moon_phase': 0.05, 'temp': {'day': 57.65, 'min': 52.03, 'max': 64.69, 'night': 53.22, 'eve': 61.43, 'morn': 54.32}, 'feels_like': {'day': 55.36, 'night': 50.5, 'eve': 59.02, 'morn': 52.7}, 'pressure': 1011, 'humidity': 48, 'dew_point': 37.72, 'wind_speed': 12.28, 'wind_deg': 235, 'wind_gust': 16.26, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10d'}], 'clouds': 100, 'pop': 0.6, 'rain': 1.07, 'uvi': 5}, {'dt': 1633719600, 'sunrise': 1633700025, 'sunset': 1633740998, 'moonrise': 1633709580, 'moonset': 1633746360, 'moon_phase': 0.09, 'temp': {'day': 50.88, 'min': 43.38, 'max': 55.08, 'night': 43.38, 'eve': 47.7, 'morn': 45.97}, 'feels_like': {'day': 48.54, 'night': 37.44, 'eve': 41.02, 'morn': 42.8}, 'pressure': 1008, 'humidity': 61, 'dew_point': 37.22, 'wind_speed': 20.69, 'wind_deg': 227, 'wind_gust': 23.55, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10d'}], 'clouds': 100, 'pop': 0.8, 'rain': 
0.91, 'uvi': 5}]}

env_path = Path('.') / '.env'
load_dotenv(dotenv_path=env_path)
client = slack.WebClient(token=os.environ['SLACK_TOKEN'])
top_temp = 75
top_temp_bool = True
bottom_temp_bool = True
lastMessage = {'text':''}
bottom_temp = 65
lad = 43.49
lon = -111.976157
url = f"http://api.openweathermap.org/data/2.5/onecall?units=imperial&lat={lad}&lon={lon}&APPID={os.environ['WEATHER_APP_ID']}"

def get_weather():
    response = requests.get(url).json()
    if 'rain' in response:
        text = "Time to close the windows! It's going to rain."
        if lastMessage['text']!=text:
            lastMessage['text'] = text
            client.chat_postMessage(channel='#slacknotifications',text=text)
    elif response['current']['temp'] >= top_temp:
        text = "Time to close the windows! It's getting to hot."
        if lastMessage['text']!=text:
            lastMessage['text'] = text
            client.chat_postMessage(channel='#slacknotifications',text=text)

    elif response['current']['temp'] <= bottom_temp:
        text = "Time to close the windows! It's getting to cold."
        if lastMessage['text']!=text:
            lastMessage['text'] = text
            client.chat_postMessage(channel='#slacknotifications',text=text)
    else:
        text = "Time to open the windows! It's nice outside!"
        if lastMessage['text']!=text:
            lastMessage['text'] = text
            client.chat_postMessage(channel='#slacknotifications',text=text)
# get_weather()

# schedule.every().minute.at(":00").do(get_weather)
# schedule.every().minute.at(":15").do(get_weather)
# schedule.every().minute.at(":30").do(get_weather)
# schedule.every().minute.at(":45").do(get_weather)

# while True:
#     schedule.run_pending()
#     time.sleep(1)